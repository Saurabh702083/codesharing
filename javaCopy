Below is my code in which i want to make some modification, 
i want to check if in businessDto id is passed then i have to get BusinessInfo based upon id and then set BusinessDto data into BusinessInfo and then save into database.
and if in businessDto id is not passed or its a empty then run my exixting code.

@Component
@RequiredArgsConstructor
public class BusinessInfoDao {
    private final LoggerUtility logger = LoggerFactoryUtility.getLogger(this.getClass());
    private final BusinessInfoMapper businessInfoMapper;
    private final BusinessInfoRepository businessInfoRepository;

    public BusinessDto saveBusinessInfo(BusinessDto businessDto) {
        logger.info("DAO Layer: Starting saveBusinessInfo operation for mif ID: {}", businessDto.getMerchantMIFId());
        BusinessInfo savedBusinessInfo = businessInfoRepository.save(businessInfoMapper.mapRequestToEntity(businessDto));
        logger.info("BusinessInfo entity saved successfully. Business Info ID: {}", savedBusinessInfo.getId());
        return businessInfoMapper.mapEntityToResponse(savedBusinessInfo);
    }

@Data
@NoArgsConstructor
@Builder
@AllArgsConstructor
public class BusinessDto {
    private UUID id;
    private String merchantMIFId;
    private PanDetailsDto panDetailsDto;
    private String gstIn;
    private String tan;
    private String legalName;
    private String brandName;
    private String constitution;
    private String website;
    private String dateOfEstablishment;
    private String currentAnnualTurnover;
    private String officeAddress;
    private String country;
    private String state;
    private String cityOrArea;
    private String pincode;
    private String natureOfBusiness;
    private String companyProfile;
    private String productOrServiceIntendedToSell;
    private String recoveryOfTxnCharges;

}

@Audited
@AuditTable(value = "BUSINESS_INFO_AUDIT")
@Table(name = "BUSINESS_INFO")
@Entity
@AllArgsConstructor
@NoArgsConstructor
@Builder
@Setter
@Getter
public class BusinessInfo extends AuditEntity {
    @Id
    @GeneratedValue(strategy = GenerationType.UUID)
    private UUID id;
    @Column(name = "MERCHANT_MIF_ID")
    private String merchantMIFId;
    @Lob
    private String pan;
    private String gstIn;
    private String tan;
    private String legalName;
    private String brandName;
    private String constitution;
    private String website;
    @Column(name = "DATE_OF_ESTABLISHMENT")
    private String dateOfEstablishment;
    @Column(name = "CURRENT_ANNUAL_TURNOVER")
    private String currentAnnualTurnover;
    private String officeAddress;
    private String country;
    private String state;
    private String cityOrArea;
    private String pincode;
    private String natureOfBusiness;
    private String companyProfile;
    private String productOrServiceIntendedToSell;
    private String recoveryOfTxnCharges;
    @Version
    private int version;

    @PrePersist
    @PreUpdate
    public void setEntityNameForRevision() {
        AuditRevisionListener.setEntityName(this.getClass().getSimpleName());
    }
}

@Mapper(builder = @Builder(disableBuilder = true), componentModel = "spring")
public interface BusinessInfoMapper {

    @Mapping(source = "panDetailsDto", target = "pan", qualifiedByName = "objectToString")
    BusinessInfo mapRequestToEntity(BusinessDto businessDto);

    BusinessDto mapEntityToResponse(BusinessInfo businessInfo);

    @Named("objectToString")
    default String objectToString(PanDetailsDto panDetailsDto) {
        ObjectMapper objectMapper = new ObjectMapper();
        try {
            return objectMapper.writeValueAsString(panDetailsDto);
        } catch (JsonProcessingException e) {
            throw new RuntimeException(e);
        }
    }

}


@Component
@RequiredArgsConstructor
public class BusinessInfoDao {

    private final LoggerUtility logger = LoggerFactoryUtility.getLogger(this.getClass());
    private final BusinessInfoMapper businessInfoMapper;
    private final BusinessInfoRepository businessInfoRepository;

    public BusinessDto saveBusinessInfo(BusinessDto businessDto) {
        logger.info("DAO Layer: Starting saveBusinessInfo operation for mif ID: {}", businessDto.getMerchantMIFId());

        BusinessInfo businessInfo;

        // ✅ UPDATE FLOW: ID present in DTO
        if (businessDto.getId() != null) {
            logger.info("ID present in BusinessDto. Updating existing BusinessInfo with id: {}", businessDto.getId());

            businessInfo = businessInfoRepository.findById(businessDto.getId())
                    .orElseThrow(() -> new IllegalArgumentException(
                            "BusinessInfo not found for id: " + businessDto.getId()
                    ));

            // Copy all updatable fields from DTO into the managed entity
            businessInfoMapper.updateEntityFromDto(businessDto, businessInfo);

        } else {
            // ✅ CREATE FLOW: no ID in DTO → new entity
            logger.info("No ID in BusinessDto. Creating new BusinessInfo record.");
            businessInfo = businessInfoMapper.mapRequestToEntity(businessDto);
        }

        BusinessInfo savedBusinessInfo = businessInfoRepository.save(businessInfo);
        logger.info("BusinessInfo entity saved successfully. Business Info ID: {}", savedBusinessInfo.getId());

        return businessInfoMapper.mapEntityToResponse(savedBusinessInfo);
    }
}


import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.mapstruct.BeanMapping;
import org.mapstruct.Builder;
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.MappingTarget;
import org.mapstruct.Named;
import org.mapstruct.NullValuePropertyMappingStrategy;

@Mapper(
        builder = @Builder(disableBuilder = true),
        componentModel = "spring"
)
public interface BusinessInfoMapper {

    // ✅ For CREATE
    @Mapping(source = "panDetailsDto", target = "pan", qualifiedByName = "objectToString")
    BusinessInfo mapRequestToEntity(BusinessDto businessDto);

    // ✅ For RESPONSE (optional: map JSON string back to PanDetailsDto)
    @Mapping(source = "pan", target = "panDetailsDto", qualifiedByName = "stringToObject")
    BusinessDto mapEntityToResponse(BusinessInfo businessInfo);

    // ✅ For UPDATE (copy DTO data into existing entity)
    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)
    @Mapping(source = "panDetailsDto", target = "pan", qualifiedByName = "objectToString")
    void updateEntityFromDto(BusinessDto businessDto, @MappingTarget BusinessInfo businessInfo);


    // ====== Converters for pan <-> panDetailsDto ======

    @Named("objectToString")
    default String objectToString(PanDetailsDto panDetailsDto) {
        if (panDetailsDto == null) {
            return null;
        }
        ObjectMapper objectMapper = new ObjectMapper();
        try {
            return objectMapper.writeValueAsString(panDetailsDto);
        } catch (JsonProcessingException e) {
            throw new RuntimeException("Error converting PanDetailsDto to JSON string", e);
        }
    }

    @Named("stringToObject")
    default PanDetailsDto stringToObject(String panJson) {
        if (panJson == null || panJson.isBlank()) {
            return null;
        }
        ObjectMapper objectMapper = new ObjectMapper();
        try {
            return objectMapper.readValue(panJson, PanDetailsDto.class);
        } catch (JsonProcessingException e) {
            throw new RuntimeException("Error converting JSON string to PanDetailsDto", e);
        }
    }
}


